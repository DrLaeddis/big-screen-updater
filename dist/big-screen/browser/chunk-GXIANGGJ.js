import{a as M}from"./chunk-7W76JT5L.js";import{a as N}from"./chunk-2LVOHUXW.js";import{c as j}from"./chunk-QERJSP3R.js";import"./chunk-JWDGFI55.js";import{h as E,i as F,j as O}from"./chunk-PQNYVRMP.js";import{a as L}from"./chunk-K3YAW35H.js";import{Ba as g,Ca as r,Fa as x,Ha as p,Ia as l,Ja as m,Ka as S,La as y,Ma as z,Na as f,Oa as C,W as u,Za as h,a as k,b as T,ca as b,da as w,ia as I,oa as d,ra as a,sa as v}from"./chunk-WH7RZBSH.js";var P=(()=>{let i=class i{constructor(){this.icon="",this.size="",this.sessionType="",this.selectSession=new I}handleClick(){this.selectSession.emit({sessionType:this.sessionType,icon:this.icon})}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=u({type:i,selectors:[["app-session-item"]],inputs:{icon:"icon",size:"size",sessionType:"sessionType"},outputs:{selectSession:"selectSession"},standalone:!0,features:[h],decls:2,vars:5,consts:[[3,"click"],[1,"w-[65%]",3,"src"]],template:function(e,n){e&1&&(p(0,"button",0),f("click",function(){return n.handleClick()}),m(1,"img",1),l()),e&2&&(x("w-[",n.size,"] h-[",n.size,"] flex justify-center items-center bg-black border-4 border-secondary/50 rounded-full relative cursor-pointer transition-all duration-300 hover:border-primary focus:border-primary focus:scale-95"),a(),r("src",n.icon,d))}});let s=i;return s})();function V(s,i){if(s&1){let c=z();S(0),p(1,"app-session-item",6),f("selectSession",function(e){b(c);let n=C(2);return w(n.handleSelectSession(e))}),l(),y()}if(s&2){let c=i.$implicit;a(),r("icon",c.icon)("size",c.size)("sessionType",c.type)}}function G(s,i){if(s&1&&(S(0),p(1,"div",5),g(2,V,2,3,"ng-container",3),l(),y()),s&2){let c=i.$implicit;a(2),r("ngForOf",c)}}function J(s,i){s&1&&m(0,"app-loading")}var Z=(()=>{let i=class i{ngOnInit(){let t=localStorage.getItem("experience");if(console.log("sessExperience",t),t){let e=JSON.parse(t);this.bufferExperience=e,console.log("parsedExperience",e)}}constructor(t,e){this.websocketService=t,this.router=e,this.logo="logo-w-name.svg",this.matrix="matrix.svg",this.novak_mode="novak-mode.png",this.recharge="recharge.png",this.reconnect="reconnect.png",this.recover="recover.png",this.rejuvenate="rejuvenate.png",this.relax="relax.png",this.bio_feedback="bio-feedback.png",this.selectedIcon=null,this.loading=!1,this.socketTopicList=[],this.sessionGroups=[[{icon:this.recover,type:"recover",size:"25vw"},{icon:this.relax,type:"relax",size:"25vw"}],[{icon:this.novak_mode,type:"novak_mode",size:"25vw"},{icon:this.bio_feedback,type:"bio_feedback",size:"30vw"},{icon:this.rejuvenate,type:"rejuvenate",size:"25vw"}],[{icon:this.recharge,type:"recharge",size:"25vw"},{icon:this.reconnect,type:"reconnect",size:"25vw"}]]}handleSelectSession(t){let e=localStorage.getItem("Token")||"";if(!e){console.log("token not found");return}let n=this.bufferExperience.filter(_=>_.menu_name===t.sessionType);localStorage.setItem("session",t.sessionType),localStorage.setItem("icon",t.icon),localStorage.setItem("session_id",n[0].id);let o=n[0].variation.map(_=>_.duration);console.log("durations_",o),localStorage.setItem("timeVarian",o),this.updateAuthStatus(),this.websocketService.sendMessage("selectSession",{session:t.sessionType,icon:t.icon,sessionProp:n[0]},e)}updateAuthStatus(){let t=localStorage.getItem("socketTopicList");if(t){let n=JSON.parse(t).map(o=>o.topic==="selectSession"?T(k({},o),{auth_status:o.auth_status===null?!0:o.auth_status}):o);localStorage.setItem("socketTopicList",JSON.stringify(n))}}};i.\u0275fac=function(e){return new(e||i)(v(L),v(j))},i.\u0275cmp=u({type:i,selectors:[["app-task8"]],standalone:!0,features:[h],decls:5,vars:4,consts:[[3,"backgroundImage"],[1,"w-[50vw]","absolute",3,"src"],[1,"w-[80vw]","flex","justify-between","items-center"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"flex","flex-col","items-center","gap-3"],[3,"selectSession","icon","size","sessionType"]],template:function(e,n){e&1&&(p(0,"app-layout",0),m(1,"img",1),p(2,"div",2),g(3,G,3,1,"ng-container",3),l()(),g(4,J,1,0,"app-loading",4)),e&2&&(r("backgroundImage","background-image"),a(),r("src",n.matrix,d),a(2),r("ngForOf",n.sessionGroups),a(),r("ngIf",n.loading))},dependencies:[M,P,N,O,E,F]});let s=i;return s})();export{Z as Task8Page};
